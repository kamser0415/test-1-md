# MultiThread

## 프로세스와 쓰레드

멀티 태스킹이란 프로세스 여러 개를 작업할 수있다는 말이다.
cpu는 여러개의 프로세스를 실행하기위해 컨택스트 스위칭 방식으로 번갈아가면서 프로세스의 연산을 수행한다.

멀티 프로세스가 갖는 이점이 여기서 하나 있다.
프로세스가 증가할 수록 컨택스트 스위칭에 대한 비용이 발생하는 것보다 
쓰레드를 늘리는건 컨택스트 스위칭이 발생하는 비용이 적다.

멀티 쓰레드는 하나의 프로세스에서 시간이 걸리는 I/O 작업을 하는 스레드와
CPU 연산이 필요한 쓰레드를 나누어 사용하여 블로킹 IO 시간을 줄일수 잇다.

베타제어 Lock을 사용하지 않고 Interlocked.increment(),Atomic Operation, Lock-Free 알고리즘, Non-Blocking 알고리즘, CAS(compare and set)  

멀티프로세스에서는 메모리가 공유되어 같은 메모리에 데이터를 사용하여 데이터의 상태를 보고 프로그램 실행 여부를 결정할 수 있다.

프로세스간 통신을 위해서 프로토콜을 만드는 작업을 하고 관리하는 건 리소스가 큽니다.
서로 다른 언어로된 프로세스끼리 패킷으로 통신하려면 귀찮은게 발생한다. 그래서 공통 모델을 제공하는 
Google Protobuf같은 라이브러리를 사용한다.

그러면 Json으로 통신하면 되는데? 그것도 가능하지만 필드가 변경될 경우 오타나 기타 오류가 발생하여 
디버깅을 하는 과정을 하는 것보다 Protobuf를 사용하는게 편하다.  
  
서버와 서버간의 통신 방법말고 다른 방법도 있습니다.  

레디스에 특정 Key에 데이터를 넣고 Pub/Sub을 이용하는 방법도 있고, 

빠르게 통신할 필요할 필요가 없다면 AWS SQS 같은 큐에 넣고, 데이터가 추가됐을때 특정 Topic으로 Event를 받는 방법이 있습니다.  
  
데이터를 보내려는 서버가 알아서 다른 서버에 보내주는게 아니라 알아서 가져가는 방식  
  
Java 언어로 배우는 디자인 입문 멀티쓰레드편